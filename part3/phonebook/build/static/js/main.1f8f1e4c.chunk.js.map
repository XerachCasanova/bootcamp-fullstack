{"version":3,"sources":["components/Field.js","components/Form.js","components/Person.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Field","label","value","handleChange","onChange","Form","action","fieldHandler","onSubmit","map","field","type","Person","person","actionDelete","name","number","onClick","id","Notification","messagePack","notificationStyle","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","message","messageType","style","baseUrl","axios","get","then","response","data","newPerson","post","put","delete","MESSAGE_TYPE_ERROR","App","useState","persons","setPersons","newName","setNewName","newPhone","setNewPhone","filterName","setFilterName","setMessagePack","useEffect","personsService","listPersons","personsFilteredByName","trim","filter","toLowerCase","indexOf","deletePerson","window","confirm","setTimeout","p","catch","error","alert","event","target","preventDefault","length","changedPerson","returnedPerson","prevPersons","e","status","concat","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1f8f1e4c.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Field = ({ label, value, handleChange }) => <>{label} <input key={label} value={value} onChange={handleChange} /><br/></>\r\n\r\nexport default Field","import React from 'react'\r\nimport Field from './Field'\r\n\r\nconst Form = ({ action, fieldHandler }) => \r\n\r\n    <form onSubmit={action}>\r\n      <div>\r\n          { fieldHandler.map(field => \r\n            <Field key={field.label} label={field.label} value={field.value} handleChange={field.handleChange} />) }\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n\r\n    </form>\r\n\r\n    export default Form","\r\n\r\nconst Person = ({ person, actionDelete }) => \r\n    <li>\r\n        {person.name} {person.number} \r\n        <button key={person.id} onClick = {() => actionDelete(person)}>\r\n            delete\r\n        </button>\r\n    </li>\r\n\r\nexport default Person","const Notification = ({messagePack}) => {\r\n    \r\n    \r\n    const notificationStyle = {\r\n        color: 'green',\r\n        background: 'lightgrey',\r\n        fontSize: 20,\r\n        borderStyle: 'solid',\r\n        borderRadius: 5,\r\n        padding: 10,\r\n        marginBottom: 10\r\n    }\r\n\r\n    if (messagePack === null) {\r\n        \r\n\r\n        return null\r\n\r\n    }\r\n\r\n    const [message, messageType] = messagePack\r\n    \r\n    if (messageType === \"ERROR\") notificationStyle.color = \"red\"\r\n    if (messageType === \"ADVICE\") notificationStyle.color = \"green\"\r\n\r\n    \r\n    return (\r\n\r\n        <div style={notificationStyle}>\r\n            {message}\r\n        </div>\r\n\r\n    )\r\n\r\n}\r\n\r\n\r\n\r\n\r\nexport default Notification","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n\r\n    return request.then(response => response.data)\r\n  }\r\n\r\n\r\nconst create = (newPerson) => {\r\n\r\n    const request = axios.post(baseUrl, newPerson)\r\n\r\n    return request.then(response => response.data)\r\n\r\n\r\n}\r\n\r\nconst update = (id, person) => {\r\n\r\n    const request = axios.put(`${baseUrl}/${id}`,person)\r\n    \r\n    return request.then(response => response.data)\r\n\r\n}\r\n\r\nconst remove = (id) => {\r\n    \r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n\r\n    return request.then(response => response.data)\r\n\r\n\r\n}\r\n\r\nexport default { getAll, create, update, remove }","import React, { useState, useEffect } from 'react'\r\nimport Form from './components/Form'\r\nimport Person from './components/Person'\r\nimport Field from './components/Field'\r\nimport Notification from './components/Notification'\r\nimport personsService from './services/persons'\r\n\r\nconst MESSAGE_TYPE_ERROR = 'ERROR'\r\nconst MESSAGE_TYPE_ADVICE = 'ADVICE'\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([])\r\n  const [newName, setNewName] = useState('')\r\n  const [newPhone, setNewPhone] = useState('')\r\n  const [filterName, setFilterName] = useState('')\r\n  const [messagePack, setMessagePack] = useState(null)\r\n\r\n\r\n  const hookGetAllPersons = () => {\r\n\r\n    personsService\r\n      .getAll()\r\n      .then(listPersons => {\r\n        setPersons(listPersons)\r\n      })\r\n\r\n  }\r\n\r\n  useEffect(hookGetAllPersons, [])\r\n\r\n  const addPerson = (event) => {\r\n\r\n    event.preventDefault()\r\n    const newPerson =\r\n    {\r\n      name: newName,\r\n      number: newPhone,\r\n    }\r\n\r\n\r\n    const filter = persons.filter(person => person.name.toLowerCase() === newName.toLowerCase())\r\n\r\n    if (filter.length > 0 && filter[0].number !== newPhone) {\r\n\r\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\r\n\r\n        const changedPerson = { ...filter[0], number: newPhone }\r\n\r\n        personsService\r\n          .update(changedPerson.id, changedPerson)\r\n\r\n          .then(returnedPerson => {\r\n            setPersons(prevPersons => (prevPersons.map(p => p.id !== filter[0].id ? p : returnedPerson)))\r\n\r\n          })\r\n          .catch(error => {\r\n            if (error.response.data.error) {\r\n              const e = error.response.data.error\r\n              setMessagePack([e, MESSAGE_TYPE_ERROR])\r\n              setTimeout(() => { setMessagePack(null) }, 5000)\r\n            } else if (error.response.status === 404) {\r\n\r\n              alert(`${filter[0].name} was already deleted from server`)\r\n              setPersons(persons.filter(p => p.id !== filter[0].id))\r\n\r\n            }\r\n          })\r\n      }\r\n    } else if (filter.length > 0 && filter[0].number === newPhone) {\r\n\r\n      window.alert(`${newName} is already added to phonebook`)\r\n\r\n    } else if (newName.trim() === \"\") {\r\n\r\n      window.alert(\"field name cannot be empty\")\r\n\r\n    } else {\r\n\r\n      personsService\r\n        .create(newPerson)\r\n        .then(returnedPerson => {\r\n          setPersons(persons.concat(returnedPerson))\r\n          setNewName('')\r\n          setNewPhone('')\r\n          setMessagePack([`Added ${newName} `, MESSAGE_TYPE_ADVICE])\r\n          setTimeout(() => { setMessagePack(null) }, 5000)\r\n\r\n        })\r\n        .catch(error => {\r\n          const e = error.response.data.error\r\n          setMessagePack([e, MESSAGE_TYPE_ERROR])\r\n          setTimeout(() => { setMessagePack(null) }, 5000)\r\n        })\r\n\r\n\r\n\r\n    }\r\n\r\n  }\r\n\r\n  const handleNameChange = (event) => {\r\n\r\n    setNewName(event.target.value)\r\n\r\n  }\r\n\r\n  const handlePhoneChange = (event) => {\r\n    setNewPhone(event.target.value)\r\n  }\r\n\r\n  const handleFilterChange = (event) => {\r\n\r\n    setFilterName(event.target.value)\r\n\r\n  }\r\n\r\n  let personsFilteredByName\r\n\r\n\r\n  if (filterName.trim() === '') {\r\n\r\n    personsFilteredByName = persons\r\n\r\n  } else {\r\n\r\n    personsFilteredByName = persons.filter(person => person.name.toLowerCase().indexOf(filterName.toLowerCase()) > -1)\r\n\r\n  }\r\n\r\n  const deletePerson = (person) => {\r\n    if (window.confirm(`delete ${person.name}?`)) {\r\n      personsService\r\n        .remove(person.id)\r\n        .then(\r\n          setMessagePack([`Information of ${person.name} has already been removed from server `, MESSAGE_TYPE_ERROR]),\r\n          setTimeout(() => { setMessagePack(null) }, 5000),\r\n          setPersons(persons.filter(p => p.id != person.id)),\r\n\r\n        )\r\n        .catch(error => {\r\n          alert(`${person.name} was already deleted from server`)\r\n          setPersons(persons.filter(p => p.id !== person.id))\r\n        })\r\n\r\n    }\r\n\r\n\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification messagePack={messagePack} />\r\n      <Field key=\"filter\" label=\"filter shown with\" value={filterName} handleChange={handleFilterChange} />\r\n      <h2>Add a new Person</h2>\r\n      <Form action={addPerson}\r\n        fieldHandler={[\r\n          {\r\n            label: 'name',\r\n            value: newName,\r\n            handleChange: handleNameChange\r\n          },\r\n          {\r\n            label: 'phone',\r\n            value: newPhone,\r\n            handleChange: handlePhoneChange\r\n          }\r\n\r\n        ]\r\n        } />\r\n      <h2>Numbers</h2>\r\n      <ul>\r\n        {personsFilteredByName.map(person => <Person key={person.id} person={person} actionDelete={deletePerson} />)}\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}